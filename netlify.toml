[build]
  base = "/"
  publish = "public/"
  command = "yarn build"
  environment = { YARN_VERSION = "1.22.10" }

[[plugins]]
  package = "./netlify/plugins/netlify-plugin-env-config"

[[redirects]]
  from = "/is"
  to = "/images/code4rena_is.pdf"
  status = 200  

[context.production]
  command = "source ./env_setup.sh PRODUCTION_ && yarn build"

[context.deploy-preview]
  ignore = "bash ./netlify-ignore-branch.sh"

[context.deploy-preview.environment]
  C4_ENV = "staging"

[context.staging.environment]
  command = "source ./env_setup.sh STAGING_ && yarn build"

[functions]
  directory = "functions/"
  included_files = ["_data/contests/*"]
